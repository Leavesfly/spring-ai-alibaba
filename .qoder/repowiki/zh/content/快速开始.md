# 快速开始

<cite>
**本文档中引用的文件**
- [README.md](file://README.md)
- [spring-ai-alibaba-starter-dashscope/pom.xml](file://spring-ai-alibaba-spring-boot-starters/spring-ai-alibaba-starter-dashscope/pom.xml)
- [DashScopeChatAutoConfiguration.java](file://auto-configurations/spring-ai-alibaba-autoconfigure-dashscope/src/main/java/com/alibaba/cloud/ai/autoconfigure/dashscope/DashScopeChatAutoConfiguration.java)
- [DashScopeConnectionProperties.java](file://auto-configurations/spring-ai-alibaba-autoconfigure-dashscope/src/main/java/com/alibaba/cloud/ai/autoconfigure/dashscope/DashScopeConnectionProperties.java)
- [DashScopeChatProperties.java](file://auto-configurations/spring-ai-alibaba-autoconfigure-dashscope/src/main/java/com/alibaba/cloud/ai/autoconfigure/dashscope/DashScopeChatProperties.java)
- [DashScopeChatModel.java](file://spring-ai-alibaba-core/src/main/java/com/alibaba/cloud/ai/dashscope/chat/DashScopeChatModel.java)
- [Application.java](file://spring-ai-alibaba-nl2sql/spring-ai-alibaba-nl2sql-management/src/main/java/com/alibaba/cloud/ai/Application.java)
- [pom.xml](file://spring-ai-alibaba-bom/pom.xml)
</cite>

## 目录
1. [简介](#简介)
2. [环境准备](#环境准备)
3. [项目创建](#项目创建)
4. [依赖配置](#依赖配置)
5. [配置文件设置](#配置文件设置)
6. [代码实现](#代码实现)
7. [构建与运行](#构建与运行)
8. [功能测试](#功能测试)
9. [故障排除](#故障排除)

## 简介
本指南旨在帮助新用户在几分钟内快速启动并运行基于Spring AI Alibaba的应用。我们将从环境准备开始，逐步引导您完成JDK安装、Maven配置、云服务凭据设置、项目创建、依赖引入、代码编写、构建运行和问题排查等全过程。

**Section sources**
- [README.md](file://README.md)

## 环境准备
在开始使用Spring AI Alibaba之前，需要确保您的开发环境满足以下要求：

### JDK版本要求
- **最低版本**: JDK 17+
- Spring AI Alibaba框架基于现代Java特性构建，需要JDK 17或更高版本才能正常运行。
- 您可以通过命令行执行`java -version`来检查当前JDK版本。

### Maven配置
- 确保已安装Maven（建议3.6.0以上版本）
- 配置Maven的settings.xml文件，确保可以访问中央仓库
- 如果遇到依赖问题，请参考官方文档配置`spring-milestones`仓库

### 云服务凭据
- 获取阿里云通义千问（DashScope）API密钥
- API密钥是访问AI模型服务的必要凭证
- 您可以在阿里云控制台的通义千问服务页面获取API密钥

**Section sources**
- [README.md](file://README.md)

## 项目创建
您可以选择通过Spring Initializr或手动方式创建项目。

### 使用Spring Initializr
1. 访问 https://start.spring.io/
2. 选择项目类型为Maven
3. 设置Group和Artifact名称
4. 添加Spring Boot Web依赖
5. 生成并下载项目

### 手动创建项目结构
```
my-spring-ai-app/
├── src/
│   ├── main/
│   │   ├── java/
│   │   └── resources/
│   └── test/
└── pom.xml
```

**Section sources**
- [README.md](file://README.md)

## 依赖配置
在项目的pom.xml文件中添加必要的依赖项。

```xml
<dependencyManagement>
  <dependencies>
    <dependency>
      <groupId>com.alibaba.cloud.ai</groupId>
      <artifactId>spring-ai-alibaba-bom</artifactId>
      <version>1.0.0.4-SNAPSHOT</version>
      <type>pom</type>
      <scope>import</scope>
    </dependency>
  </dependencies>
</dependencyManagement>

<dependencies>
  <dependency>
    <groupId>com.alibaba.cloud.ai</groupId>
    <artifactId>spring-ai-alibaba-starter-dashscope</artifactId>
  </dependency>
  <dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-web</artifactId>
  </dependency>
</dependencies>
```

**Section sources**
- [spring-ai-alibaba-starter-dashscope/pom.xml](file://spring-ai-alibaba-spring-boot-starters/spring-ai-alibaba-starter-dashscope/pom.xml)
- [pom.xml](file://spring-ai-alibaba-bom/pom.xml)

## 配置文件设置
在src/main/resources/application.yml中配置必要的参数。

```yaml
spring:
  ai:
    dashscope:
      api-key: YOUR_API_KEY_HERE
      chat:
        options:
          model: qwen-plus
          temperature: 0.8
```

### 配置说明
- `spring.ai.dashscope.api-key`: 通义千问API密钥，必须配置
- `spring.ai.dashscope.chat.options.model`: 使用的模型名称，默认为qwen-plus
- `spring.ai.dashscope.chat.options.temperature`: 温度参数，控制输出的随机性

**Section sources**
- [DashScopeConnectionProperties.java](file://auto-configurations/spring-ai-alibaba-autoconfigure-dashscope/src/main/java/com/alibaba/cloud/ai/autoconfigure/dashscope/DashScopeConnectionProperties.java)
- [DashScopeChatProperties.java](file://auto-configurations/spring-ai-alibaba-autoconfigure-dashscope/src/main/java/com/alibaba/cloud/ai/autoconfigure/dashscope/DashScopeChatProperties.java)

## 代码实现
创建一个简单的聊天机器人应用。

### 主应用程序类
```java
@SpringBootApplication
public class Application {
    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }
}
```

### 聊天服务类
```java
@Service
public class ChatService {
    
    private final ChatClient chatClient;
    
    public ChatService(ChatClient chatClient) {
        this.chatClient = chatClient;
    }
    
    public String chat(String message) {
        return chatClient.call(message);
    }
}
```

### REST控制器
```java
@RestController
@RequestMapping("/api/chat")
public class ChatController {
    
    private final ChatService chatService;
    
    public ChatController(ChatService chatService) {
        this.chatService = chatService;
    }
    
    @GetMapping
    public String chat(@RequestParam String message) {
        return chatService.chat(message);
    }
}
```

**Section sources**
- [DashScopeChatAutoConfiguration.java](file://auto-configurations/spring-ai-alibaba-autoconfigure-dashscope/src/main/java/com/alibaba/cloud/ai/autoconfigure/dashscope/DashScopeChatAutoConfiguration.java)
- [DashScopeChatModel.java](file://spring-ai-alibaba-core/src/main/java/com/alibaba/cloud/ai/dashscope/chat/DashScopeChatModel.java)
- [Application.java](file://spring-ai-alibaba-nl2sql/spring-ai-alibaba-nl2sql-management/src/main/java/com/alibaba/cloud/ai/Application.java)

## 构建与运行
完成代码编写后，按照以下步骤构建和运行应用。

### 构建项目
```bash
mvn clean package
```

### 运行应用
```bash
mvn spring-boot:run
```

或者
```bash
java -jar target/my-spring-ai-app.jar
```

### 应用启动验证
- 应用启动后，您应该看到类似"Started Application in X seconds"的日志
- 默认情况下，应用将在8080端口监听

**Section sources**
- [Application.java](file://spring-ai-alibaba-nl2sql/spring-ai-alibaba-nl2sql-management/src/main/java/com/alibaba/cloud/ai/Application.java)

## 功能测试
通过HTTP请求测试聊天功能。

### 测试URL
```
GET http://localhost:8080/api/chat?message=Hello
```

### 预期响应
```
Hello! How can I help you today?
```

### 测试多轮对话
连续发送多个请求，验证上下文记忆功能：
1. "你好"
2. "你会做什么？"
3. "能举个例子吗？"

**Section sources**
- [ChatController.java](file://spring-ai-alibaba-nl2sql/spring-ai-alibaba-nl2sql-management/src/main/java/com/alibaba/cloud/ai/Application.java)

## 故障排除
解决新手常见的问题。

### 常见问题及解决方案

#### 依赖冲突
- **问题**: 出现ClassNotFoundException或NoSuchMethodError
- **解决方案**: 
  - 确保使用BOM管理依赖版本
  - 检查是否有其他Spring AI相关依赖造成冲突
  - 清理Maven本地仓库后重新构建

#### 配置错误
- **问题**: 应用启动失败，提示API密钥缺失
- **解决方案**:
  - 检查application.yml中的api-key配置
  - 确保密钥值正确且没有多余的空格
  - 验证密钥是否有效

#### 网络连接问题
- **问题**: 连接超时或无法访问API
- **解决方案**:
  - 检查网络连接是否正常
  - 验证API端点是否可达
  - 检查防火墙设置

#### 性能问题
- **问题**: 响应时间过长
- **解决方案**:
  - 检查API调用频率是否超过限制
  - 优化模型参数设置
  - 考虑使用缓存机制

**Section sources**
- [README.md](file://README.md)
- [DashScopeConnectionProperties.java](file://auto-configurations/spring-ai-alibaba-autoconfigure-dashscope/src/main/java/com/alibaba/cloud/ai/autoconfigure/dashscope/DashScopeConnectionProperties.java)